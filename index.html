<!DOCTYPE html>
<html>
<body>

<img id = 'img' src = 'https://www.kasandbox.org/programming-images/animals/cat.png' width='60'>

<canvas id="myCanvas" width="60" height="60" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag :(</canvas>

<p id = 'pa'></p>

<script>

var img = document.getElementById('img');
var p = document.getElementById("pa");
var c = document.getElementById("myCanvas");
img.onload = function() {
var ctx = c.getContext("2d");
ctx.fillStyle = "red";
ctx.drawImage(img, 0, 0, c.width, c.height);


p.textContent += 'var a = [';
var j = 0;
var jl = window.setInterval(function() {
j += 1;
var imgData = ctx.getImageData(0, j, c.height, 1);
p.textContent += '[';
for ( var i = 0; i < imgData.data.length; i += 4 ) {
p.textContent += '['+imgData.data[i]+','+imgData.data[i+1]+','+imgData.data[i+2]+','+imgData.data[i+3]+'], ';
}
p.textContent += '],\n';

if (j >= myCanvas.width) { clear(); }
});

function clear() {
    window.clearInterval(jl);
    
    p.textContent += '];\nnoStroke();\nfor ( var i in a ) {\nfor ( var j in a[i] ) {\nfill(a[i][j][0], a[i][j][1], a[i][j][2], a[i][j][3]);\nrect(j*1, i*1, 1, 1);}\n}';
};




};

</script>


</body>
</html>
